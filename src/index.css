@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

/* ---- RESET & BASE ---- */
*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html, body, #root {
  height: 100%;
  overflow: hidden;
  touch-action: manipulation;
}

body {
  background: #0a0a1a;
  font-family: 'Press Start 2P', monospace;
  color: #e0e0e0;
}

/* ---- GAME CONTAINER ---- */
.game-container {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #0a0a1a;
}

/* ---- CANVAS ---- */
.game-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* ---- UI OVERLAY ---- */
.ui-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  z-index: 5;
  pointer-events: none;
}

.ui-overlay > * {
  pointer-events: auto;
}

.ui-main {
  position: relative;
  flex: 1;
  display: flex;
  min-height: 0;
  overflow: hidden;
  background: radial-gradient(circle at top, rgba(20, 20, 40, 0.8), rgba(3, 3, 12, 0.95));
}

.screen-stage {
  position: relative;
  flex: 1;
  min-height: 0;
  overflow: hidden;
  border-left: 2px solid rgba(16, 16, 40, 0.9);
  border-right: 2px solid rgba(16, 16, 40, 0.9);
  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.4);
}

.screen-stage > .screen {
  position: absolute;
}

.side-panel {
  position: relative;
  width: 280px;
  flex-shrink: 0;
  padding: 48px 18px 18px;
  background: rgba(4, 4, 18, 0.96);
  border-right: 2px solid #111129;
  box-shadow: 6px 0 20px rgba(0, 0, 0, 0.55);
  transition: width 0.3s ease, padding 0.3s ease;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.side-panel.collapsed {
  width: 60px;
  padding: 48px 8px 18px;
}

.side-panel-toggle {
  position: absolute;
  top: 10px;
  right: -14px;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  border: 2px solid #2e2e4a;
  background: #141432;
  color: #ffd700;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
}

.side-panel-body {
  display: flex;
  flex-direction: column;
  gap: 14px;
  flex: 1;
  transition: opacity 0.2s ease;
}

.side-panel-content {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.side-panel-footer {
  margin-top: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.side-panel.collapsed .side-panel-body {
  opacity: 0;
  pointer-events: none;
}

.side-panel-heading {
  text-align: left;
}

.side-panel-title {
  font-size: 10px;
  letter-spacing: 1px;
  color: #ffd700;
}

.side-panel-subtitle {
  font-size: 7px;
  color: #8e8eb2;
  margin-top: 4px;
}

.side-panel-card {
  padding: 12px;
  border: 1px solid #27274f;
  background: rgba(14, 14, 32, 0.9);
  border-radius: 4px;
}

.side-panel-card-label {
  font-size: 7px;
  color: #7171a4;
  margin-bottom: 4px;
}

.side-panel-card-value {
  font-size: 10px;
  color: #f3f3ff;
}

.side-menu-buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.side-menu-button {
  width: 100%;
  text-align: left;
  background: rgba(23, 23, 46, 0.85);
  border: 1px solid transparent;
  padding: 12px;
  border-radius: 4px;
  font-size: 8px;
  color: #d7d7ff;
  display: flex;
  flex-direction: column;
  gap: 4px;
  transition: background 0.2s ease, border 0.2s ease, transform 0.15s ease;
}

.side-menu-button:hover:not(:disabled) {
  border-color: rgba(255, 215, 0, 0.5);
  background: rgba(35, 35, 68, 0.95);
}

.side-menu-button:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

.side-menu-button.active {
  border-color: #ffd700;
  background: rgba(40, 40, 90, 0.95);
  box-shadow: inset 0 0 10px rgba(255, 215, 0, 0.1);
}

.side-menu-button-accent {
  background: linear-gradient(135deg, #3a212f, #6b2b35);
  color: #ffe1e1;
}

.side-menu-label {
  font-size: 9px;
}

.side-menu-desc {
  font-size: 7px;
  color: #9d9dc5;
}

.side-panel-divider {
  height: 1px;
  background: #1e1e3c;
  margin: 6px 0;
}

.side-panel-note {
  font-size: 7px;
  color: #f76c6c;
  background: rgba(120, 26, 38, 0.2);
  border: 1px solid rgba(247, 108, 108, 0.3);
  padding: 10px;
  border-radius: 4px;
}

/* ---- STAT BARS (shared by battle screen) ---- */
.stat-bar {
  display: flex;
  align-items: center;
  gap: 6px;
}

.bar-label {
  font-size: 7px;
  min-width: 22px;
  color: #aaa;
}

.bar {
  flex: 1;
  height: 10px;
  background: #222;
  border: 1px solid #555;
  position: relative;
  overflow: hidden;
  min-width: 0;
}

.bar-fill {
  height: 100%;
  transition: width 0.3s;
}

.hp-bar .bar-fill {
  background: linear-gradient(to bottom, #4caf50, #2e7d32);
}

.hp-bar.monster .bar-fill {
  background: linear-gradient(to bottom, #f44336, #b71c1c);
}

.bar-text {
  font-size: 7px;
  min-width: 50px;
  text-align: right;
  white-space: nowrap;
}

.character-dock {
  width: 100%;
  margin-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px;
  border-radius: 8px;
  background: rgba(9, 12, 30, 0.92);
  border: 1px solid rgba(118, 255, 223, 0.2);
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
}

.dock-hero {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.dock-hero-name {
  font-size: 11px;
  color: #fff;
  letter-spacing: 0.5px;
}

.dock-hero-meta {
  font-size: 8px;
  color: #a2b6ff;
}

.energy-wheel {
  display: flex;
  align-items: center;
  gap: 12px;
}

.energy-ring {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: conic-gradient(#76ffdf 0%, rgba(118, 255, 223, 0.15) 0% 100%);
}

.energy-core {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(8, 18, 32, 0.95) 0%, rgba(6, 12, 20, 0.95) 60%);
  border: 1px solid rgba(118, 255, 223, 0.3);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 8px;
  color: #76ffdf;
}

.energy-value {
  font-size: 12px;
  font-weight: 600;
}

.energy-max {
  font-size: 7px;
  color: rgba(255, 255, 255, 0.5);
}

.energy-meta {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.energy-label {
  font-size: 8px;
  letter-spacing: 1px;
  color: #76ffdf;
  text-transform: uppercase;
}

.energy-cost {
  font-size: 7px;
  color: rgba(255, 255, 255, 0.6);
}

.dock-stats {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.dock-stat {
  display: flex;
  flex-direction: column;
  font-size: 7px;
  color: #a2b6ff;
  min-width: 60px;
}

.dock-stat-label {
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.7;
}

.dock-stat-value {
  font-size: 9px;
  color: #f5f5ff;
}

.dock-actions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.dock-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.dock-icon-button {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.25);
  background: rgba(255, 77, 109, 0.1);
  color: #ff8aa0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  transition: border 0.2s, background 0.2s, transform 0.2s;
}

.dock-icon-button:hover:not(:disabled) {
  border-color: #ffb3c4;
  background: rgba(255, 77, 109, 0.2);
  transform: translateY(-1px);
}

.dock-icon-button:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

.heal-icon {
  font-size: 16px;
  line-height: 1;
}

.dock-action {
  background: rgba(19, 26, 52, 0.9);
  border: 1px solid rgba(118, 255, 223, 0.25);
  color: #f0f0ff;
  font-size: 7px;
  padding: 6px 10px;
  border-radius: 999px;
  text-transform: uppercase;
  letter-spacing: 1px;
  transition: border 0.2s ease, transform 0.2s ease, background 0.2s ease;
}

.dock-action:hover:not(:disabled) {
  border-color: #76ffdf;
  background: rgba(118, 255, 223, 0.1);
  transform: translateY(-1px);
}

.dock-action:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* ---- SCREENS (COMMON) ---- */
.screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 16px;
  padding-top: 50px;
}

.screen-header {
  font-size: 14px;
  color: #ffd700;
  margin-bottom: 12px;
  text-align: center;
}

.section-title {
  font-size: 9px;
  color: #ffd700;
  margin: 8px 0 6px;
  border-bottom: 1px solid #444;
  padding-bottom: 4px;
  width: 100%;
}

/* ---- BUTTONS ---- */
.btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  padding: 12px 20px;
  margin: 4px;
  background: #2a2a4a;
  color: #e0e0e0;
  border: 2px solid #555;
  cursor: pointer;
  transition: all 0.1s;
  text-transform: uppercase;
  touch-action: manipulation;
  user-select: none;
  -webkit-user-select: none;
}

.btn:hover {
  background: #3a3a6a;
  border-color: #888;
}

.btn:active {
  transform: scale(0.96);
  background: #4a4a7a;
}

.btn-primary {
  background: #1a5a1a;
  border-color: #4caf50;
  color: #7fff7f;
}

.btn-primary:hover {
  background: #2a7a2a;
}

.btn-back {
  background: #4a2a2a;
  border-color: #a55;
  color: #faa;
  font-size: 8px;
  padding: 10px 14px;
}

.btn-back:hover {
  background: #6a3a3a;
}

.btn-sm {
  font-size: 7px;
  padding: 6px 10px;
  margin: 2px;
}

.btn-large {
  font-size: 12px;
  padding: 16px 32px;
}

.btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}


/* ---- AUTH SCREEN ---- */
.auth-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 20px;
}

.auth-subtitle {
  font-size: 12px;
  color: #ffd700;
  margin-bottom: 8px;
}

.auth-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
  max-width: 300px;
}

.auth-input {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  padding: 10px 12px;
  background: rgba(0, 0, 0, 0.6);
  border: 2px solid #555;
  color: #fff;
  outline: none;
  width: 100%;
  box-sizing: border-box;
}

.auth-input:focus {
  border-color: #ffd700;
}

.auth-error {
  color: #ff6b6b;
  font-size: 8px;
  text-align: center;
}

/* ---- LOADING SCREEN ---- */
.screen-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
}

.loading-title {
  font-size: 24px;
  color: #ffd700;
  text-shadow: 3px 3px 0 #b8860b, -1px -1px 0 #000;
  letter-spacing: 4px;
}

.loading-text {
  font-size: 10px;
  color: #aaa;
}

/* ---- TOWN SCREEN ---- */
.screen-town {
  align-items: flex-start;
  justify-content: flex-start;
  padding: 60px 40px 40px 40px;
  overflow: hidden;
}

.town-layout {
  width: 100%;
  max-width: 860px;
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  overflow-y: auto;
  padding-right: 6px;
}

.town-hero-card {
  grid-column: span 2;
  background: linear-gradient(145deg, rgba(27, 27, 63, 0.95), rgba(52, 26, 70, 0.9));
  border: 2px solid rgba(255, 215, 0, 0.35);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.45);
  padding: 20px;
  border-radius: 6px;
}

.town-hero-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 14px;
}

.town-hero-identity {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.town-hero-title {
  font-size: 13px;
  color: #fff7e6;
}

.town-hero-subtitle {
  font-size: 8px;
  color: #c7c7ff;
}

.town-hero-level-badge {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.15), rgba(255, 215, 0, 0.05));
  border: 2px solid rgba(255, 215, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.level-number {
  font-size: 14px;
  color: #ffd700;
  font-weight: bold;
}

.town-hero-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 8px;
  margin-bottom: 14px;
}

.town-stat {
  padding: 10px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  background: rgba(10, 10, 24, 0.55);
}

.town-stat-label {
  font-size: 7px;
  text-transform: uppercase;
  color: #9c9cd1;
  margin-bottom: 4px;
}

.town-stat-value {
  font-size: 11px;
  color: #fff;
}

.town-gold-value {
  color: #ffd700;
}

.town-stat-bar {
  margin-top: 6px;
  height: 4px;
  border-radius: 2px;
  background: rgba(0, 0, 0, 0.4);
  overflow: hidden;
}

.town-stat-bar-fill {
  height: 100%;
  transition: width 0.3s ease;
}

.town-stat-bar-hp {
  background: linear-gradient(90deg, #4caf50, #2e7d32);
}

.town-xp-section {
  margin-top: 10px;
  margin-bottom: 12px;
}

.town-xp-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 5px;
  flex-wrap: wrap;
  gap: 4px;
}

.town-xp-label {
  font-size: 8px;
  color: #bcbcff;
}

.town-xp-numbers {
  font-size: 7px;
  color: #8e8eb2;
}

.town-bar-track {
  width: 100%;
  height: 12px;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.15);
  overflow: hidden;
}

.town-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #ffb347, #ffcc33, #7cfc00);
  transition: width 0.3s ease;
}

.town-gear-summary {
  margin-top: 8px;
}

.town-gear-label {
  font-size: 7px;
  color: #9c9cd1;
  text-transform: uppercase;
  margin-bottom: 6px;
}

.town-gear-list {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.town-gear-tag {
  font-size: 7px;
  padding: 3px 8px;
  border-radius: 3px;
  background: rgba(10, 10, 24, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.town-gear-empty {
  font-size: 7px;
  color: #666a87;
  margin-top: 6px;
}

.town-panel {
  background: rgba(18, 18, 38, 0.92);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 0;
}

.town-panel-title {
  font-size: 10px;
  color: #ffd700;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.town-panel-subtitle-text {
  font-size: 7px;
  color: #8e8eb2;
  margin-top: -6px;
}

/* Quick Actions */
.town-actions-panel {
  gap: 8px;
}

.town-quick-action {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px;
  border-radius: 6px;
  border: 1px solid rgba(118, 255, 223, 0.2);
  background: rgba(10, 18, 32, 0.8);
  color: #f0f0ff;
  text-align: left;
  font-family: 'Press Start 2P', monospace;
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s, transform 0.15s;
}

.town-quick-action:hover:not(:disabled) {
  border-color: rgba(118, 255, 223, 0.5);
  background: rgba(118, 255, 223, 0.08);
  transform: translateY(-1px);
}

.town-quick-action:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.town-quick-travel {
  border-color: rgba(118, 255, 223, 0.25);
}

.town-quick-heal {
  border-color: rgba(255, 107, 129, 0.25);
}

.town-quick-heal:hover:not(:disabled) {
  border-color: rgba(255, 107, 129, 0.5);
  background: rgba(255, 107, 129, 0.08);
}

.town-quick-heal.full-hp {
  border-color: rgba(255, 255, 255, 0.08);
}

.town-quick-icon {
  font-size: 18px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: rgba(118, 255, 223, 0.1);
  border: 1px solid rgba(118, 255, 223, 0.2);
  flex-shrink: 0;
  color: #76ffdf;
}

.town-quick-heal .town-quick-icon {
  background: rgba(255, 107, 129, 0.1);
  border-color: rgba(255, 107, 129, 0.2);
  color: #ff8aa0;
}

.town-quick-info {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.town-quick-label {
  font-size: 9px;
  color: #f0f0ff;
}

.town-quick-desc {
  font-size: 7px;
  color: #8e8eb2;
}

/* Events Board */
.town-events-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.town-event {
  padding: 10px;
  border-radius: 4px;
  background: rgba(10, 10, 24, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.town-event-badge {
  font-size: 6px;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 2px 6px;
  border-radius: 2px;
  display: inline-block;
  margin-bottom: 4px;
}

.town-event-badge.active {
  background: rgba(76, 175, 80, 0.2);
  color: #7cfc00;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.town-event-badge.upcoming {
  background: rgba(33, 150, 243, 0.2);
  color: #4fc3f7;
  border: 1px solid rgba(33, 150, 243, 0.3);
}

.town-event-title {
  font-size: 9px;
  color: #fff;
  margin-bottom: 3px;
}

.town-event-desc {
  font-size: 7px;
  color: #a0a0d4;
  line-height: 1.5;
}

/* Featured Shop Items */
.town-featured-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.town-featured-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  border-radius: 4px;
  background: rgba(10, 10, 24, 0.6);
  border: 1px solid rgba(255, 215, 0, 0.1);
  gap: 8px;
}

.town-featured-info {
  display: flex;
  flex-direction: column;
  gap: 3px;
  min-width: 0;
}

.town-featured-name {
  font-size: 9px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.town-featured-meta {
  font-size: 7px;
  color: #8e8eb2;
}

/* ---- LOCATIONS SCREEN ---- */
.screen-locations {
  justify-content: flex-start;
  padding-top: 55px;
}

.location-energy-info {
  font-size: 8px;
  color: #d4d4ff;
  margin-bottom: 8px;
  text-align: center;
}

.location-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
  max-width: 600px;
  overflow-y: auto;
  flex: 1;
  padding: 4px 0;
  -webkit-overflow-scrolling: touch;
}

.location-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(30, 30, 60, 0.9);
  border: 2px solid #444;
  padding: 12px;
  cursor: pointer;
  transition: all 0.1s;
  font-family: 'Press Start 2P', monospace;
  color: #e0e0e0;
  text-align: left;
  width: 100%;
  touch-action: manipulation;
}

.location-item:hover:not(:disabled) {
  border-color: #888;
  background: rgba(50, 50, 80, 0.9);
}

.location-item.locked, .location-item:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.location-name {
  font-size: 9px;
  color: #fff;
  margin-bottom: 4px;
}

.location-desc {
  font-size: 7px;
  color: #999;
}

.location-req {
  font-size: 7px;
  color: #ffb38a;
  margin-top: 4px;
}

.location-level {
  font-size: 8px;
  color: #aaa;
  white-space: nowrap;
  margin-left: 8px;
}

.screen-profile,
.screen-skills {
  padding-top: 55px;
  justify-content: flex-start;
  gap: 16px;
}

.profile-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
  width: 100%;
  max-width: 720px;
}

.profile-card {
  background: rgba(15, 16, 36, 0.92);
  border: 1px solid rgba(255, 255, 255, 0.07);
  border-radius: 10px;
  padding: 14px;
}

.profile-card-title {
  font-size: 9px;
  color: #ffd700;
  margin-bottom: 8px;
}

.profile-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.profile-stat-label {
  font-size: 8px;
  color: #888ab0;
}

.profile-stat-value {
  font-size: 11px;
  color: #f5f5ff;
}

.profile-equip-row {
  display: flex;
  gap: 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  padding: 6px 0;
}

.profile-equip-row:last-child {
  border-bottom: none;
}

.profile-equip-slot {
  font-size: 8px;
  color: #6f7296;
  min-width: 70px;
}

.profile-equip-item .equip-name {
  font-size: 9px;
  color: #f5f5ff;
}

.profile-equip-item {
  display: flex;
  flex-direction: column;
}

.profile-equip-item .equip-stats {
  font-size: 7px;
  color: #9ea2d3;
}

.equip-empty {
  font-size: 8px;
  color: #555a87;
}

.skills-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
  width: 100%;
  max-width: 720px;
}

.skill-card {
  padding: 12px;
  border-radius: 8px;
  background: rgba(14, 22, 42, 0.9);
  border: 1px solid rgba(79, 195, 247, 0.25);
}

.skill-name {
  font-size: 10px;
  color: #4fc3f7;
  margin-bottom: 4px;
}

.skill-detail {
  font-size: 8px;
  color: #b5c9ff;
}

.skill-effect {
  color: #ffb38a;
}

.skills-class-section {
  width: 100%;
  max-width: 720px;
  margin-bottom: 4px;
}

.skill-card-class {
  border-width: 2px;
}

/* ---- CLASS SELECT SCREEN ---- */
.screen-class-select {
  justify-content: flex-start;
  padding: 30px 20px 20px;
  gap: 12px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.class-select-header {
  font-size: 16px;
  color: #ffd700;
  text-shadow: 2px 2px 0 #b8860b;
  letter-spacing: 2px;
}

.class-select-subtitle {
  font-size: 8px;
  color: #a0a0d4;
  margin-bottom: 8px;
}

.class-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
  width: 100%;
  max-width: 860px;
}

.class-card {
  position: relative;
  background: rgba(15, 15, 35, 0.92);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  padding: 14px;
  cursor: pointer;
  transition: border-color 0.2s, box-shadow 0.2s, transform 0.15s;
  text-align: left;
  font-family: 'Press Start 2P', monospace;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.class-card:hover {
  border-color: var(--class-color, #ffd700);
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.15);
  transform: translateY(-2px);
}

.class-card-selected {
  border-color: var(--class-color, #ffd700);
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.25), inset 0 0 20px rgba(255, 215, 0, 0.05);
}

.class-card-name {
  font-size: 11px;
  letter-spacing: 1px;
}

.class-card-desc {
  font-size: 7px;
  color: #b5b5d4;
  line-height: 1.6;
}

.class-detail-panel {
  width: 100%;
  max-width: 500px;
  background: rgba(10, 10, 28, 0.95);
  border: 2px solid var(--class-color, #ffd700);
  border-radius: 8px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.5);
}

.class-detail-name {
  font-size: 14px;
  letter-spacing: 2px;
}

.class-detail-section {
  width: 100%;
  padding: 8px 10px;
  background: rgba(20, 20, 50, 0.6);
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.class-detail-label {
  font-size: 8px;
  color: #9c9cd1;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 4px;
}

.class-detail-value {
  font-size: 8px;
  color: #d7d7ff;
  line-height: 1.6;
}

.class-detail-stats {
  display: flex;
  gap: 14px;
  flex-wrap: wrap;
  font-size: 9px;
  color: #f5f5ff;
}

.class-confirm-btn {
  margin-top: 6px;
}

.btn-confirm-pulse {
  animation: confirmPulse 0.6s infinite alternate;
}

@keyframes confirmPulse {
  from { box-shadow: 0 0 5px rgba(255, 215, 0, 0.2); }
  to { box-shadow: 0 0 18px rgba(255, 215, 0, 0.5); }
}

/* ---- TOWN HERO CLASS ---- */
.town-hero-class {
  font-size: 9px;
  margin-bottom: 4px;
  letter-spacing: 1px;
}

/* ---- PROFILE CLASS INFO ---- */
.profile-class-info {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.profile-class-row {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* ---- EXPLORE SCREEN ---- */
.screen-explore {
  justify-content: center;
}

.explore-location {
  font-size: 12px;
  color: #ffd700;
  position: absolute;
  top: 55px;
}

.explore-text {
  font-size: 9px;
  line-height: 2;
  text-align: center;
  max-width: 400px;
  padding: 0 16px;
  white-space: pre-line;
}

.explore-actions {
  position: absolute;
  bottom: 20px;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
}

/* ---- BATTLE SCREEN ---- */
.screen-battle {
  justify-content: flex-start;
  padding-top: 50px;
  gap: 4px;
}

/* Turn indicator */
.turn-indicator {
  font-size: 7px;
  letter-spacing: 2px;
  text-transform: uppercase;
  padding: 3px 12px;
  border-radius: 2px;
  transition: all 0.3s ease;
}

.turn-indicator.your-turn {
  color: #7cfc00;
  background: rgba(76, 175, 80, 0.15);
  border: 1px solid rgba(76, 175, 80, 0.3);
  animation: turnPulse 0.8s ease-in-out infinite alternate;
}

.turn-indicator.enemy-turn {
  color: #ff6666;
  background: rgba(244, 67, 54, 0.15);
  border: 1px solid rgba(244, 67, 54, 0.2);
}

@keyframes turnPulse {
  from { box-shadow: 0 0 4px rgba(76, 175, 80, 0.1); }
  to { box-shadow: 0 0 12px rgba(76, 175, 80, 0.3); }
}

/* Battle combatants layout */
.battle-combatants {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 95%;
  max-width: 500px;
  padding: 6px 0;
}

.battle-combatant {
  flex: 1;
  min-width: 0;
}

.battle-player-side {
  text-align: left;
}

.battle-monster-side {
  text-align: right;
}

.battle-monster-side .stat-bar {
  flex-direction: row-reverse;
}

.battle-monster-side .bar-label {
  text-align: right;
}

.battle-monster-side .bar-text {
  text-align: left;
}

.combatant-name {
  font-size: 8px;
  display: block;
  margin-bottom: 3px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.player-name-tag {
  color: #7cfc00;
}

.monster-name-tag {
  color: #ff6666;
}

.monster-header {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 6px;
  margin-bottom: 2px;
}

.battle-vs {
  font-size: 10px;
  color: #ffd700;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
  flex-shrink: 0;
  padding: 0 4px;
  animation: vsPulse 1.5s ease-in-out infinite alternate;
}

@keyframes vsPulse {
  from { opacity: 0.6; }
  to { opacity: 1; }
}

/* Status effects row */
.battle-status-row {
  display: flex;
  justify-content: space-between;
  width: 95%;
  max-width: 500px;
  gap: 8px;
}

.monster-info {
  width: 90%;
  max-width: 350px;
}

.monster-name {
  font-size: 10px;
  color: #ff6666;
  display: block;
  margin-bottom: 6px;
}

.battle-log {
  position: absolute;
  bottom: 80px;
  left: 12px;
  right: 12px;
  max-height: 100px;
  overflow-y: auto;
  font-size: 8px;
  line-height: 1.8;
  color: #ccc;
  background: rgba(0, 0, 0, 0.8);
  padding: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  -webkit-overflow-scrolling: touch;
  backdrop-filter: blur(4px);
}

.log-dmg-player { color: #ff6666; }
.log-dmg-monster { color: #66ff66; }
.log-heal { color: #66ccff; }
.log-info { color: #ffcc66; }

.battle-actions {
  position: absolute;
  bottom: 10px;
  left: 0;
  right: 0;
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
  justify-content: center;
  padding: 0 8px;
}

.battle-actions .btn {
  font-size: 8px;
  padding: 10px 14px;
  flex: 0 0 auto;
  transition: all 0.15s ease;
}

/* Distinct button styles for each action */
.btn-battle-attack {
  background: linear-gradient(180deg, #4a2a2a, #3a1a1a);
  border-color: #cc4444;
  color: #ff8888;
}

.btn-battle-attack:hover:not(:disabled) {
  background: linear-gradient(180deg, #6a3a3a, #5a2a2a);
  border-color: #ff6666;
  box-shadow: 0 0 10px rgba(255, 68, 68, 0.3);
}

.btn-battle-defend {
  background: linear-gradient(180deg, #1a2a4a, #0a1a3a);
  border-color: #4488cc;
  color: #88bbff;
}

.btn-battle-defend:hover:not(:disabled) {
  background: linear-gradient(180deg, #2a3a5a, #1a2a4a);
  border-color: #66aaff;
  box-shadow: 0 0 10px rgba(68, 136, 255, 0.3);
}

.btn-battle-heal {
  background: linear-gradient(180deg, #1a3a2a, #0a2a1a);
  border-color: #44aa66;
  color: #88ff99;
}

.btn-battle-heal:hover:not(:disabled) {
  background: linear-gradient(180deg, #2a4a3a, #1a3a2a);
  border-color: #66cc88;
  box-shadow: 0 0 10px rgba(68, 170, 102, 0.3);
}

/* Floating damage numbers */
.floating-damage {
  position: absolute;
  font-family: 'Press Start 2P', monospace;
  font-size: 14px;
  pointer-events: none;
  z-index: 50;
  text-shadow: 2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
  animation: floatDamage 1s ease-out forwards;
  transform: translateX(-50%);
}

.floating-dmg-player {
  color: #ff4444;
  font-size: 16px;
}

.floating-dmg-monster {
  color: #44ff44;
  font-size: 16px;
}

.floating-heal {
  color: #44ccff;
  font-size: 13px;
}

.floating-absorb {
  color: #aa88ff;
  font-size: 12px;
}

@keyframes floatDamage {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(0.8);
  }
  15% {
    opacity: 1;
    transform: translateX(-50%) translateY(-8px) scale(1.3);
  }
  40% {
    opacity: 1;
    transform: translateX(-50%) translateY(-20px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-50px) scale(0.7);
  }
}

/* ---- BOSS CONFIRM SCREEN ---- */
.screen-boss-confirm {
  justify-content: center;
  gap: 12px;
  text-align: center;
}

.boss-warning {
  font-size: 16px;
  color: #ff4444;
  text-shadow: 0 0 10px rgba(255, 68, 68, 0.6);
  animation: pulse 0.5s infinite alternate;
  margin-bottom: 4px;
}

.screen-boss-confirm .boss-name {
  font-size: 14px;
  color: #ffd700;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
}

.screen-boss-confirm .boss-title {
  font-size: 8px;
  color: #ffb38a;
  margin-bottom: 8px;
}

.boss-stats {
  font-size: 9px;
  color: #e0e0e0;
  line-height: 2;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid #555;
  padding: 12px 20px;
  margin-bottom: 8px;
}

.boss-confirm-text {
  font-size: 8px;
  color: #ffcc66;
  max-width: 360px;
  line-height: 1.8;
}

.boss-confirm-actions {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

.btn-danger {
  background: #6a1a1a;
  border-color: #f44336;
  color: #ff8a8a;
}

.btn-danger:hover {
  background: #8a2a2a;
}

/* ---- BOSS BATTLE INDICATORS ---- */
.boss-badge {
  display: inline-block;
  background: linear-gradient(135deg, #ff4444, #cc0000);
  color: #fff;
  font-size: 7px;
  padding: 2px 6px;
  margin-bottom: 4px;
  letter-spacing: 2px;
  text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);
}

.monster-name.boss-name {
  color: #ffd700;
  text-shadow: 0 0 6px rgba(255, 215, 0, 0.4);
}

.boss-subtitle {
  font-size: 7px;
  color: #ffb38a;
  margin-bottom: 4px;
}

.hp-bar.boss-hp .bar-fill {
  background: linear-gradient(to bottom, #ff6600, #cc0000);
}

/* ---- BATTLE RESULT ---- */
.screen-result {
  padding-top: 0;
}

.result-title {
  font-size: 18px;
  margin-bottom: 20px;
}

.result-title.victory { color: #4caf50; }
.result-title.defeat { color: #f44336; }
.result-title.boss-result.victory { color: #ffd700; text-shadow: 0 0 12px rgba(255, 215, 0, 0.6); }
.boss-victory-text { color: #ffd700; font-size: 8px; margin-bottom: 4px; }

.result-rewards {
  font-size: 9px;
  line-height: 2.2;
  text-align: center;
  margin-bottom: 12px;
}

.result-levelup {
  font-size: 10px;
  color: #ffd700;
  margin-bottom: 12px;
  text-align: center;
  line-height: 2;
  animation: pulse 0.5s infinite alternate;
}

@keyframes pulse {
  from { opacity: 0.7; }
  to { opacity: 1; }
}

/* ---- INVENTORY SCREEN ---- */
.screen-inventory {
  justify-content: flex-start;
  padding-top: 55px;
  overflow: hidden;
}

.inv-content {
  width: 100%;
  max-width: 640px;
  overflow-y: auto;
  flex: 1;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 8px;
}

.equipment-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 6px;
}

.equip-slot {
  background: rgba(30, 30, 60, 0.9);
  border: 2px solid #555;
  padding: 8px;
  font-size: 8px;
  transition: border-color 0.2s, box-shadow 0.2s;
  position: relative;
}

.equip-slot-drop-valid {
  border-color: #7f7;
  box-shadow: 0 0 8px rgba(111, 255, 123, 0.35);
}

.equip-slot-drop-invalid {
  border-color: #f66;
  box-shadow: 0 0 8px rgba(255, 102, 102, 0.25);
}

.equip-label {
  color: #aaa;
  font-size: 7px;
  margin-bottom: 3px;
}

.equip-item {
  font-size: 8px;
  color: #fff;
}

.equip-stats {
  color: #7f7;
  font-size: 7px;
  margin-top: 2px;
}

.inventory-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-height: 180px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.inv-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(30, 30, 60, 0.9);
  border: 1px solid #444;
  padding: 8px;
  font-size: 8px;
  gap: 8px;
  position: relative;
  transition: border-color 0.15s, background 0.15s, opacity 0.15s;
}

.inv-item.dragging {
  opacity: 0.35;
}

.inv-item.drag-over-before::before,
.inv-item.drag-over-after::after {
  content: '';
  position: absolute;
  left: 6px;
  right: 6px;
  height: 2px;
  background: #ffd700;
  pointer-events: none;
}

.inv-item.drag-over-before::before {
  top: -2px;
}

.inv-item.drag-over-after::after {
  bottom: -2px;
}

.inv-item-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.inv-item-name {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.inv-item-stats {
  color: #7f7;
  font-size: 7px;
}

.inv-item-actions {
  display: flex;
  gap: 2px;
  flex-shrink: 0;
}

.player-stats-summary {
  font-size: 8px;
  color: #aaa;
  margin-top: 10px;
  text-align: center;
  line-height: 2;
}

.empty-text {
  font-size: 8px;
  color: #666;
  padding: 8px;
}

/* ---- SHOP SCREEN ---- */
.screen-shop {
  justify-content: flex-start;
  padding-top: 55px;
  gap: 0;
  max-width: 560px;
  width: auto;
  left: 0;
  right: 0;
  margin: 0 auto;
}

.shop-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 0 4px 10px;
}

.shop-title {
  font-size: 14px;
  color: #ffd700;
  text-shadow: 0 0 12px rgba(255, 215, 0, 0.3);
}

.shop-wallet {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 3px;
}

.shop-wallet-gold {
  font-size: 11px;
  color: #ffd700;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.25);
}

.shop-wallet-inv {
  font-size: 7px;
  color: #8e8eb2;
}

/* Tabs */
.shop-tabs {
  display: flex;
  width: 100%;
  border-bottom: 2px solid #2a2a4a;
  margin-bottom: 10px;
}

.shop-tab {
  flex: 1;
  padding: 10px 0;
  font-family: 'Press Start 2P', monospace;
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #6e6e9a;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: color 0.2s, border-color 0.2s;
  margin-bottom: -2px;
}

.shop-tab:hover {
  color: #b0b0d0;
}

.shop-tab.active {
  color: #ffd700;
  border-bottom-color: #ffd700;
}

/* Content area */
.shop-content {
  flex: 1;
  width: 100%;
  min-height: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding: 0 2px;
}

.shop-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  width: 100%;
}

/* Item cards */
.shop-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(14, 14, 32, 0.9);
  border: 1px solid #2a2a4a;
  border-left: 3px solid #555;
  border-radius: 4px;
  padding: 10px 12px;
  gap: 10px;
  transition: border-color 0.15s, background 0.15s, opacity 0.15s;
}

.shop-card:hover {
  background: rgba(22, 22, 48, 0.95);
}

.shop-card.unaffordable {
  opacity: 0.5;
}

/* Rarity left-border colors */
.shop-card.rarity-common { border-left-color: #888; }
.shop-card.rarity-uncommon { border-left-color: #4fc3f7; }
.shop-card.rarity-rare { border-left-color: #ab47bc; }
.shop-card.rarity-epic { border-left-color: #ffa726; }
.shop-card.rarity-legendary {
  border-left-color: #ffd700;
  box-shadow: inset 0 0 15px rgba(255, 215, 0, 0.06);
}

.shop-card-left {
  display: flex;
  flex-direction: column;
  gap: 3px;
  min-width: 0;
}

.shop-card-type {
  font-size: 6px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: #5e5e8a;
}

.shop-card-name {
  font-size: 9px;
  color: #fff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.shop-card-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.shop-rarity-badge {
  font-size: 6px;
  padding: 2px 5px;
  border-radius: 2px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.1);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.shop-rarity-badge.rarity-uncommon { border-color: rgba(79, 195, 247, 0.3); }
.shop-rarity-badge.rarity-rare { border-color: rgba(171, 71, 188, 0.3); }
.shop-rarity-badge.rarity-epic { border-color: rgba(255, 167, 38, 0.3); }
.shop-rarity-badge.rarity-legendary {
  border-color: rgba(255, 215, 0, 0.4);
  background: rgba(255, 215, 0, 0.08);
}

.shop-card-stats {
  font-size: 7px;
  color: #7cfc7c;
}

/* Buy / Sell buttons */
.shop-buy-btn,
.shop-sell-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 8px 14px;
  border-radius: 4px;
  border: 1px solid transparent;
  font-family: 'Press Start 2P', monospace;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s, transform 0.1s;
  flex-shrink: 0;
}

.shop-buy-btn {
  background: rgba(26, 90, 26, 0.7);
  border-color: rgba(76, 175, 80, 0.5);
  color: #7fff7f;
}

.shop-buy-btn:hover:not(:disabled) {
  background: rgba(36, 120, 36, 0.85);
  border-color: #4caf50;
}

.shop-buy-btn:active:not(:disabled) {
  transform: scale(0.95);
}

.shop-buy-btn:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

.shop-sell-btn {
  background: rgba(90, 50, 26, 0.7);
  border-color: rgba(255, 167, 38, 0.4);
  color: #ffc876;
}

.shop-sell-btn:hover {
  background: rgba(120, 65, 30, 0.85);
  border-color: #ffa726;
}

.shop-sell-btn:active {
  transform: scale(0.95);
}

.shop-btn-price {
  font-size: 9px;
}

.shop-btn-label {
  font-size: 6px;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.7;
}

/* Empty state */
.shop-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  gap: 8px;
}

.shop-empty-text {
  font-size: 9px;
  color: #6e6e9a;
}

.shop-empty-hint {
  font-size: 7px;
  color: #4a4a6a;
}

/* Footer */
.shop-footer {
  display: flex;
  justify-content: center;
  width: 100%;
  padding-top: 12px;
}

/* ---- RARITY COLORS ---- */
.rarity-common { color: #ccc; }
.rarity-uncommon { color: #4fc3f7; }
.rarity-rare { color: #ab47bc; }
.rarity-epic { color: #ffa726; }
.rarity-legendary { color: #ffd700; }

/* ---- MESSAGE OVERLAY ---- */
.message-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.92);
  border: 2px solid #ffd700;
  padding: 16px 24px;
  font-size: 10px;
  z-index: 100;
  text-align: center;
  max-width: 85%;
  animation: fadeIn 0.15s;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

/* ---- SCROLLBAR ---- */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #444; border-radius: 2px; }

/* ===========================================
   RESPONSIVE BREAKPOINTS
   =========================================== */

/* Small phones */
@media (max-width: 400px) {
  .btn { font-size: 9px; padding: 10px 16px; }
  .btn-large { font-size: 10px; padding: 14px 24px; }
  .btn-sm { font-size: 6px; padding: 5px 8px; }
  .battle-actions .btn { font-size: 7px; padding: 8px 10px; }
  .ui-main { flex-direction: column; }
  .side-panel { width: 100%; border-right: none; border-bottom: 2px solid #111129; padding: 50px 12px 12px; }
  .side-panel.collapsed { width: 100%; }
  .right-panel { display: none; }
  .screen-stage { border-left: none; }
  .screen-town { padding: 40px 20px; }
  .town-hero-card { grid-column: span 1; }
  .town-hero-stats { grid-template-columns: repeat(2, minmax(80px, 1fr)); }
  .town-layout { grid-template-columns: 1fr; }
  .town-hero-level-badge { width: 36px; height: 36px; }
  .level-number { font-size: 12px; }
  .bar-text { min-width: 40px; font-size: 6px; }
  .equipment-grid { grid-template-columns: repeat(2, 1fr); }
  .location-item { padding: 8px; }
  .location-name { font-size: 8px; }
  .battle-combatants { flex-direction: column; gap: 4px; }
  .battle-vs { display: none; }
  .battle-monster-side .stat-bar { flex-direction: row; }
  .battle-monster-side .bar-text { text-align: right; }
  .floating-damage { font-size: 11px; }
  .turn-indicator { font-size: 6px; }
  .combatant-name { font-size: 7px; }
}

@media (max-width: 640px) {
  .character-dock {
    align-items: flex-start;
  }

  .dock-actions {
    justify-content: flex-start;
  }
}

/* Medium phones */
@media (min-width: 401px) and (max-width: 600px) {
  .equipment-grid { grid-template-columns: repeat(2, 1fr); }
}

/* Short screens (landscape phones) */
@media (max-height: 500px) {
  .screen { padding-top: 40px; }
  .side-panel { padding-top: 38px; }
  .btn { padding: 8px 14px; font-size: 8px; }
  .battle-log { max-height: 60px; bottom: 55px; }
  .battle-actions { bottom: 4px; }
  .battle-actions .btn { padding: 7px 10px; font-size: 7px; }
  .explore-text { font-size: 8px; }
  .inventory-list { max-height: 100px; }
  .result-title { font-size: 14px; margin-bottom: 10px; }
  .result-rewards { font-size: 8px; }
  .battle-combatants { gap: 4px; }
  .turn-indicator { font-size: 6px; padding: 2px 8px; }
  .floating-damage { font-size: 10px; }
}

/* Tablets and desktops */
@media (min-width: 601px) and (min-height: 501px) {
  .equipment-grid { grid-template-columns: repeat(3, 1fr); }
  .town-layout { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
  .battle-log { max-height: 120px; }
}

/* Landscape orientation adjustments */
@media (orientation: landscape) and (max-height: 450px) {
  .screen-town { padding: 35px 20px; }
  .town-layout { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
  .explore-actions { bottom: 8px; }
  .screen-result { padding-top: 40px; }
  .result-title { font-size: 12px; margin-bottom: 6px; }
}


/* ---- SKILL TREE SCREEN ---- */
.screen-skills {
  padding-top: 55px;
  justify-content: flex-start;
  gap: 8px;
  overflow: hidden;
}

.skill-tree-container {
  width: 100%;
  max-width: 720px;
  overflow-y: auto;
  flex: 1;
  padding: 0 8px 16px;
  -webkit-overflow-scrolling: touch;
}

.skill-tree-innate {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  margin-bottom: 4px;
}

.skill-tree-connector {
  text-align: center;
  color: #555;
  font-size: 10px;
  line-height: 1;
}

.skill-tree-tier {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.skill-tree-tier-label {
  font-size: 9px;
  color: #ffd700;
  text-align: center;
  letter-spacing: 1px;
}

.skill-tree-tier-label.locked {
  color: #555;
}

.skill-tree-tier-req {
  color: #f76c6c;
  font-size: 7px;
}

.skill-tree-choices {
  display: flex;
  gap: 10px;
  width: 100%;
  justify-content: center;
}

.skill-tree-node {
  flex: 0 1 320px;
  padding: 10px;
  border-radius: 6px;
  background: rgba(14, 22, 42, 0.9);
  border: 2px solid rgba(255, 255, 255, 0.1);
  transition: border-color 0.2s, box-shadow 0.2s, opacity 0.2s;
}

.skill-tree-node-innate {
  width: 100%;
  max-width: 400px;
  border-width: 2px;
}

.skill-tree-node-available {
  border-color: rgba(255, 215, 0, 0.5);
  cursor: pointer;
}

.skill-tree-node-available:hover {
  border-color: #ffd700;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);
}

.skill-tree-node-selected {
  border-width: 2px;
  box-shadow: 0 0 12px rgba(76, 175, 80, 0.3);
  background: rgba(20, 40, 20, 0.9);
}

.skill-tree-node-rejected {
  opacity: 0.3;
  border-color: rgba(255, 255, 255, 0.05);
}

.skill-tree-node-locked {
  opacity: 0.4;
  border-color: rgba(255, 255, 255, 0.05);
}

.skill-tree-node-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.skill-tree-node-type {
  font-size: 6px;
  padding: 2px 5px;
  border-radius: 2px;
  text-transform: uppercase;
  letter-spacing: 1px;
  flex-shrink: 0;
}

.skill-tree-node-type.passive {
  background: rgba(76, 175, 80, 0.2);
  color: #7cfc00;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.skill-tree-node-type.active {
  background: rgba(33, 150, 243, 0.2);
  color: #4fc3f7;
  border: 1px solid rgba(33, 150, 243, 0.3);
}

.skill-tree-node-name {
  font-size: 9px;
  color: #f5f5ff;
}

.skill-tree-node-desc {
  font-size: 7px;
  color: #b5c9ff;
  line-height: 1.6;
}

.skill-tree-node-mana {
  font-size: 7px;
  color: #4fc3f7;
  margin-top: 3px;
}

.skill-tree-node-badge {
  font-size: 7px;
  color: #7cfc00;
  text-align: right;
  margin-top: 4px;
  letter-spacing: 1px;
}

.skill-tree-node-badge.rejected {
  color: #666;
}

/* Skill passives summary */
.skill-passives-summary {
  width: 100%;
  max-width: 720px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: rgba(10, 10, 24, 0.6);
  border: 1px solid rgba(76, 175, 80, 0.2);
  border-radius: 4px;
}

.skill-passives-label {
  font-size: 7px;
  color: #7cfc00;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.skill-passives-list {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.skill-passive-tag {
  font-size: 7px;
  padding: 2px 6px;
  border-radius: 3px;
  background: rgba(76, 175, 80, 0.15);
  border: 1px solid rgba(76, 175, 80, 0.3);
  color: #b5ffb5;
}

/* Skill confirm dialog */
.skill-confirm-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
}

.skill-confirm-dialog {
  background: rgba(10, 10, 28, 0.98);
  border: 2px solid #ffd700;
  border-radius: 8px;
  padding: 20px;
  max-width: 380px;
  width: 90%;
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
  text-align: center;
}

.skill-confirm-title {
  font-size: 12px;
  color: #ffd700;
}

.skill-confirm-type {
  font-size: 8px;
  padding: 2px 8px;
  border-radius: 2px;
  background: rgba(33, 150, 243, 0.2);
  color: #4fc3f7;
}

.skill-confirm-desc {
  font-size: 8px;
  color: #b5c9ff;
  line-height: 1.8;
}

.skill-confirm-cost {
  font-size: 8px;
  color: #4fc3f7;
}

.skill-confirm-warning {
  font-size: 8px;
  color: #f76c6c;
  background: rgba(120, 26, 38, 0.2);
  border: 1px solid rgba(247, 108, 108, 0.3);
  padding: 8px 12px;
  border-radius: 4px;
  line-height: 1.6;
}

.skill-confirm-actions {
  display: flex;
  gap: 10px;
  margin-top: 4px;
}

/* ---- BATTLE PASSIVES & DEBUFFS ---- */
.battle-passives {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  width: 90%;
  max-width: 350px;
  margin-top: 4px;
}

.battle-passives-label {
  font-size: 6px;
  color: #7cfc00;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.battle-passive-tag {
  font-size: 6px;
  padding: 1px 4px;
  border-radius: 2px;
  background: rgba(76, 175, 80, 0.15);
  border: 1px solid rgba(76, 175, 80, 0.25);
  color: #b5ffb5;
}

.battle-debuffs-monster,
.battle-debuffs-player {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 2px 0;
  width: 90%;
  max-width: 350px;
}

.battle-debuff {
  font-size: 6px;
  padding: 1px 5px;
  border-radius: 2px;
}

.battle-debuff.poison {
  background: rgba(76, 175, 80, 0.15);
  border: 1px solid rgba(76, 175, 80, 0.3);
  color: #7cfc00;
}

.battle-debuff.doom {
  background: rgba(171, 71, 188, 0.15);
  border: 1px solid rgba(171, 71, 188, 0.3);
  color: #e040fb;
}

.battle-debuff.debuff {
  background: rgba(244, 67, 54, 0.15);
  border: 1px solid rgba(244, 67, 54, 0.3);
  color: #ff6666;
}

.battle-debuff.buff {
  background: rgba(33, 150, 243, 0.15);
  border: 1px solid rgba(33, 150, 243, 0.3);
  color: #4fc3f7;
}

/* Battle skill menu */
.battle-skill-menu {
  flex-wrap: wrap;
  gap: 3px;
}

.btn-skill {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1px;
  padding: 6px 10px;
  font-size: 7px;
  background: rgba(20, 40, 80, 0.9);
  border-color: rgba(79, 195, 247, 0.4);
}

.btn-skill:hover:not(:disabled) {
  border-color: #4fc3f7;
  background: rgba(30, 60, 120, 0.9);
}

.skill-btn-name {
  font-size: 7px;
  color: #f5f5ff;
}

.skill-btn-cost {
  font-size: 6px;
  color: #4fc3f7;
}

.btn-skills-toggle {
  background: rgba(20, 40, 80, 0.9);
  border-color: rgba(79, 195, 247, 0.4);
  color: #4fc3f7;
}

.btn-skills-toggle:hover:not(:disabled) {
  border-color: #4fc3f7;
  background: rgba(30, 60, 120, 0.9);
}

/* Battle mana display */
.battle-mana-display {
  position: absolute;
  top: 55px;
  right: 12px;
  font-size: 8px;
  color: #4fc3f7;
  background: rgba(0, 0, 0, 0.6);
  padding: 3px 8px;
  border-radius: 3px;
  border: 1px solid rgba(79, 195, 247, 0.2);
}

/* ---- USERNAME ENTRY SCREEN ---- */
.username-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 14px;
  padding: 20px;
}

.username-title {
  font-size: 24px;
  color: #ffd700;
  text-shadow: 3px 3px 0 #b8860b, -1px -1px 0 #000;
  letter-spacing: 4px;
}

.username-subtitle {
  font-size: 12px;
  color: #ffd700;
  margin-bottom: 2px;
}

.username-desc {
  font-size: 8px;
  color: #a0a0d4;
  text-align: center;
  max-width: 320px;
  line-height: 1.8;
}

.username-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
  max-width: 300px;
  align-items: center;
}

.username-form .auth-input {
  text-align: center;
  font-size: 12px;
  letter-spacing: 1px;
}

/* ---- RIGHT PANEL (FRIENDS / INVITES) ---- */
.right-panel {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 260px;
  max-height: 50vh;
  padding: 40px 14px 14px;
  background: rgba(4, 4, 18, 0.96);
  border-left: 2px solid #111129;
  border-top: 2px solid #111129;
  box-shadow: -6px 0 20px rgba(0, 0, 0, 0.55);
  transition: width 0.3s ease, max-height 0.3s ease, padding 0.3s ease;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  z-index: 5;
  border-top-left-radius: 8px;
}

.right-panel.collapsed {
  width: 48px;
  max-height: 48px;
  padding: 8px;
}

.right-panel-toggle {
  position: absolute;
  top: 8px;
  left: 8px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid #2e2e4a;
  background: #141432;
  color: #76ffdf;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
  z-index: 2;
}

.right-panel-body {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
  overflow-y: auto;
  transition: opacity 0.2s ease;
  -webkit-overflow-scrolling: touch;
}

.right-panel.collapsed .right-panel-body {
  opacity: 0;
  pointer-events: none;
}

.right-panel-heading {
  text-align: left;
}

.right-panel-title {
  font-size: 10px;
  letter-spacing: 1px;
  color: #76ffdf;
}

.right-panel-subtitle {
  font-size: 7px;
  color: #8e8eb2;
  margin-top: 4px;
}

/* Invite Form */
.invite-form {
  display: flex;
  gap: 6px;
}

.invite-input {
  flex: 1;
  min-width: 0;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px;
  padding: 8px 10px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid #2e2e4a;
  color: #fff;
  outline: none;
  border-radius: 4px;
}

.invite-input:focus {
  border-color: #76ffdf;
}

.invite-send-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
  padding: 8px 12px;
  background: rgba(26, 90, 26, 0.7);
  border: 1px solid rgba(76, 175, 80, 0.5);
  color: #7fff7f;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
  white-space: nowrap;
}

.invite-send-btn:hover:not(:disabled) {
  background: rgba(36, 120, 36, 0.85);
  border-color: #4caf50;
}

.invite-send-btn:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

.invite-error {
  font-size: 7px;
  color: #f76c6c;
  background: rgba(120, 26, 38, 0.2);
  border: 1px solid rgba(247, 108, 108, 0.3);
  padding: 6px 8px;
  border-radius: 4px;
}

.invite-success {
  font-size: 7px;
  color: #7cfc00;
  background: rgba(26, 120, 38, 0.2);
  border: 1px solid rgba(76, 175, 80, 0.3);
  padding: 6px 8px;
  border-radius: 4px;
}

/* Invite Sections */
.invite-section {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.invite-section-title {
  font-size: 8px;
  color: #ffd700;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding-bottom: 4px;
  border-bottom: 1px solid #1e1e3c;
}

.invite-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.invite-card {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 4px;
  background: rgba(14, 14, 32, 0.9);
  border: 1px solid #27274f;
}

.invite-card-received {
  border-left: 3px solid #ffa726;
}

.invite-card-sent {
  border-left: 3px solid #4fc3f7;
}

.invite-card-friend {
  border-left: 3px solid #76ffdf;
}

.invite-card-name {
  font-size: 8px;
  color: #f0f0ff;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.invite-card-status {
  font-size: 7px;
  color: #8e8eb2;
}

.invite-card-actions {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

.invite-accept-btn,
.invite-decline-btn {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 1px solid transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}

.invite-accept-btn {
  background: rgba(26, 90, 26, 0.5);
  border-color: rgba(76, 175, 80, 0.4);
  color: #7fff7f;
}

.invite-accept-btn:hover {
  background: rgba(36, 120, 36, 0.7);
  border-color: #4caf50;
}

.invite-decline-btn {
  background: rgba(90, 26, 26, 0.5);
  border-color: rgba(244, 67, 54, 0.4);
  color: #ff6666;
}

.invite-decline-btn:hover {
  background: rgba(120, 36, 36, 0.7);
  border-color: #f44336;
}

.invite-friend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #76ffdf;
  flex-shrink: 0;
  box-shadow: 0 0 6px rgba(118, 255, 223, 0.4);
}

.invite-empty {
  font-size: 7px;
  color: #6e6e9a;
  padding: 8px 0;
  line-height: 1.8;
}

/* Safe area for notched phones */
@supports (padding: env(safe-area-inset-top)) {
  .battle-actions, .explore-actions {
    padding-bottom: env(safe-area-inset-bottom);
  }
}
